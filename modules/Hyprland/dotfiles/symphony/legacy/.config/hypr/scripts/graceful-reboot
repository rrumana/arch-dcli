#!/bin/bash

# Graceful reboot - closes all windows before rebooting
# This allows apps like Chrome/browsers to save state properly

# Close all Hyprland windows gracefully
close_all_windows() {
  hyprctl clients -j | jq -r ".[].address" | while read -r addr; do
    hyprctl dispatch closewindow address:"$addr" 2>/dev/null
  done
}

# Close all windows
close_all_windows

# Wait for apps to save their state (especially browsers)
sleep 1

# Reboot without wall message
systemctl reboot --no-wall
