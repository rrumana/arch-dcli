#!/bin/bash

# Toggle terminal transparency between 1 and 0.8
# Works for: Kitty, Ghostty, Alacritty

KITTY="$HOME/.config/kitty/kitty.conf"
GHOSTTY="$HOME/.config/ghostty/config"
ALACRITTY="$HOME/.config/alacritty/alacritty.toml"

# Kitty: background_opacity 1 <-> 0.8
if [ -f "$KITTY" ]; then
  if grep -q "background_opacity 1" "$KITTY"; then
    sed -i "s/background_opacity 1/background_opacity 0.8/" "$KITTY"
  else
    sed -i "s/background_opacity 0.8/background_opacity 1/" "$KITTY"
  fi
  pkill -SIGUSR1 kitty
fi

# Ghostty: background-opacity = 1 <-> 0.8
if [ -f "$GHOSTTY" ]; then
  if grep -q "background-opacity = 1" "$GHOSTTY"; then
    sed -i "s/background-opacity = 1/background-opacity = 0.8/" "$GHOSTTY"
  else
    sed -i "s/background-opacity = 0.8/background-opacity = 1/" "$GHOSTTY"
  fi
  pkill -SIGUSR2 ghostty
fi

# Alacritty: opacity = 1 <-> 0.8
if [ -f "$ALACRITTY" ]; then
  if grep -q "opacity = 1" "$ALACRITTY"; then
    sed -i "s/opacity = 1/opacity = 0.8/" "$ALACRITTY"
  else
    sed -i "s/opacity = 0.8/opacity = 1/" "$ALACRITTY"
  fi
fi
