# Audio device priority configuration
# Higher priority.session = preferred device when multiple are available
#
# Priority order:
#   1. USB DAC (Audiocular Spark) - priority 2500
#   2. Laptop built-in audio (Ryzen HD) - priority 1500
#
# Note: The DAC only appears when IEMs are plugged into it (hardware detection)

monitor.alsa.rules = [
  # USB DAC (Audiocular Spark) - highest priority
  # When IEMs are plugged into the DAC, it becomes the default output
  {
    matches = [
      {
        node.name = "~alsa_output.usb-TTGK_Technology_Co._Ltd_Audiocular_Spark*"
      }
    ]
    actions = {
      update-props = {
        priority.session = 2500
      }
    }
  }

  # Laptop built-in audio (Ryzen HD Audio) - default priority
  # Used when DAC is not connected or no IEMs in DAC
  {
    matches = [
      {
        node.name = "~alsa_output.pci-0000_04_00.6.analog-stereo*"
      }
    ]
    actions = {
      update-props = {
        priority.session = 1500
      }
    }
  }
]
